# Retry + Timeout policy
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: my-app-resilience
spec:
  hosts:
    - my-app-service
  http:
    - route:
        - destination:
            host: my-app-service
      timeout: 5s                   # Timeout sau 5 giay
      retries:
        attempts: 3                 # Retry 3 lan neu loi
        perTryTimeout: 2s           # Moi lan retry timeout 2s
        retryOn: 5xx                # Chi retry khi server error
